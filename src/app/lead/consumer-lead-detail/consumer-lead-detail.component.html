<div class="main-container">
    <div class="master-heading bcspace">
        <div class="back-btn">
            <a mat-button (click)="db.goBack()"><i class="material-icons">arrow_right_alt</i></a>
        </div>
        <div class="vl-info">
            <ul>
                <li><p><span>{{ lead.first_name+' '+lead.last_name }} </span></p></li>
                <!-- <li class="status-icon" *ngIf="lead.category == 'hot'"><img src="../assets/img/hot-icon.svg"></li> -->
                <!-- <li class="status-icon" *ngIf="lead.category == 'cold'"><img src="../assets/img/cold-icon.svg"></li> -->
                <li><p class="light">Source : <span class="{{ lead.source }} d-space">{{ lead.source | titlecase }}</span></p></li>
                <li><p class="light">Created By : <span >{{ lead.created_name }}-{{ lead.created_at  | date: 'dd MMM yy'}}</span></p></li>
                <li  *ngIf="lead?.appoint_name"><p class="light">Status By : <span >{{ lead?.appoint_name }}-{{ lead.status_convert_date  | date: 'dd MMM yy'}}</span></p></li>

                <li>
                  <div class="item-filter">
                    <mat-form-field class="w100">
                        <!-- (selectionChange)="updateConsumerLeadStatus(status.value)"  -->
                      <mat-select matNativeControl name="status" [(ngModel)]="lead.lead_status" #status="ngModel" (selectionChange)="openCreateFollowupDialog(status.value)" required>
                        <mat-option value="Already finalized">Already finalized</mat-option>
                        <mat-option value="new">New</mat-option>
                        <mat-option value="attempted_to_contact">Attempted to Contact</mat-option>
                        <mat-option value="booked">Booked</mat-option>
                        <mat-option value="cancelled_booking">Cancelled Booking</mat-option>
                        <mat-option value="convert">Convert</mat-option>
                        <mat-option value="cold">Cold</mat-option>
                        <mat-option value="contact_in_future">Contact in Future</mat-option>
                        <mat-option value="contacted">contacted</mat-option>
                        <mat-option value="demo">Demo</mat-option>
                        <mat-option value="hot">Hot</mat-option>
                        <mat-option value="junk">Junk</mat-option>
                        <mat-option value="lost">Lost</mat-option>
                        <mat-option value="meeting">Meeting</mat-option>
                        <mat-option value="other state">Other State</mat-option>
                        <mat-option value="other studio">Other Studio</mat-option>
                        <mat-option value="not_contacted">Not Contacted</mat-option>
                        <mat-option value="not_interested">Not interested</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </li>
            </ul>
        </div>

        <div class="m-right-data vl-info">
            <ul>                
                
                <li class="af-none padding0">
                    <button class="ac-btn link" mat-button  [matMenuTriggerFor]="menu">
                        Action
                        <i class="material-icons icon">arrow_drop_down</i>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item *ngIf="lead.franchise_id != 0" (click)="list_job_card()">List Job Card</button>
                        <button mat-menu-item  (click)="jobcard_forward()">Create Job Card</button>
                        <button mat-menu-item (click)="openCreateFollowupDialog()" >Create Followup</button>
                        <button mat-menu-item (click)="deleteLead(lead.id)">Delete</button>
                    </mat-menu>
                </li>
            </ul>
        </div>


        <!-- <div class="m-right-data action-btns-right vl-info">
            <ul>
                <li class="create" *ngIf="lead.franchise_id != 0"><a mat-button (click)="list_job_card()">List Job Card</a></li>
                <li class="create" *ngIf="lead.franchise_id != 0"><a mat-button  class="link" routerLink="/addjobcard/{{lead_id}}/0/{{lead.franchise_id}}" routerLinkActive="active">Create Job Card</a></li>
                <li class="create"><a mat-button (click)="openCreateFollowupDialog()">Create Followup</a></li>
                <li class="delete"><a mat-button (click)="deleteLead(lead.id)" ><i class="material-icons">delete_sweep</i> DELETE</a></li>
            </ul>
        </div> -->
    </div>
    <div class="cs-container detail">
      <div class="cs-spinner full-page" *ngIf = "!loading_list">
        <div class="outer">
          <div class="innear">
            <mat-spinner></mat-spinner>
            <P>LOADING . . .</P>
          </div>
        </div>
      </div>
      <form name="form" (ngSubmit)="f.form.valid && updateLead()" #f="ngForm" novalidate  *ngIf = "loading_list">
        <div class="row">
            <div class="col-8">
                <div class="right-data pl0">
                    <div class="contst">
                        <div class="cs-heading">
                            <h2>Customer's Vehicle Details</h2>
                            <p><i class="material-icons ic-watch">watch_later</i>{{ lead.created_at | date: 'dd MMM yyyy' }}</p>
                        </div>
                        
                        <div class="form-field">
                          <div class="row">
                              <div class="col-12">
                                  <div class="row">
                                    <div class="control-field col-6">
                                      <mat-form-field class="cs-multi-select cs-input">
                                        <mat-select placeholder="Vehicle Type" [disabled]="!enable_service_plan_name" name="vehicle_type" [(ngModel)]="lead.vehicle_type" #vehicle_type="ngModel" (selectionChange)="getServicePlan(vehicle_type.value)" required>
                                          <mat-option *ngFor="let val of vehicle_types" [value]="val.name"> {{val.name}} </mat-option>
                                        </mat-select>
                                      </mat-form-field>
                                    </div>
                                    <div class="control-field col-6 edit-input" [ngClass]="{'active': enable_service_plan_name}">
                                      <mat-form-field class="cs-multi-select cs-input" [ngClass]="{'active': enable_service_plan_name}">
                                        <mat-select placeholder="Service Plan" [disabled]="!enable_service_plan_name" name="service_plan_id" [(ngModel)]="lead.service_plan_id" #service_plan_id="ngModel" required>
                                            <mat-option *ngFor="let val of service_plans" [value]="val.id"> {{val.plan_name}} </mat-option>
                                        </mat-select>
                                        <div class="edit-icon right-side" [ngClass]="{'active': enable_service_plan_name}">
                                            <button mat-button class="save" *ngIf="enable_service_plan_name" type="submit "><i class="material-icons" title="Save">save</i></button>
                                            <a mat-button class="edit" *ngIf="!enable_service_plan_name" (click)="enable_service_plan_name=true"><i class="material-icons" title="EDIT">create</i></a>
                                          </div>
                                      </mat-form-field>
                                      <mat-error color="primary" *ngIf="f.submitted && !service_plan_id.valid" >This field is required</mat-error>
                                     
                                    </div>
                                  </div>
                              </div>
                            </div>
                          <div class="row">
                            <div class="col-12">
                                <div class="row">
                                  <!-- <div class="control-field col-4 edit-input">
                                    <mat-form-field class="cs-multi-select cs-input">
                                      <mat-select placeholder="Country" [disabled]="!enable_location" name="country_id" [(ngModel)]="lead.country_id" #country_id="ngModel"  (selectionChange)="getLocations(country_id.value)" required>
                                        <mat-option *ngFor="let val of countries" [value]="val.id"> {{val.name}} </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                    <mat-error color="primary" *ngIf="f.submitted && !country_id.valid" >This field is required</mat-error>
                                  </div> -->


                                  <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_country}">
                                    <mat-form-field class="cs-multi-select cs-input" >
                                      <mat-select placeholder="Country" [disabled]="!enable_country" name="country" [(ngModel)] = "lead.country" #country="ngModel" (selectionChange)="getLocations()" required>
                                        <mat-option *ngFor="let val of countries" [value]="val.id"> {{val.name}} </mat-option>                                               
                                      </mat-select>

                                      <div class="edit-icon right-side" [ngClass]="{'active': enable_country}">
                                          <button mat-button class="save dark-green-bg  " *ngIf="enable_country" type="submit"><i class="material-icons" title="Save">save</i></button>
                                          <a mat-button class="edit" *ngIf="!enable_country" (click)="enable_country=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>
                                    <!-- <mat-error color="primary" *ngIf="f.submitted && !profile.valid" >This field is required</mat-error> -->
                                   
                                </div>                                       
                                <!-- <div class="control-field col-4 edit-input pr55">
                                    <mat-form-field class="cs-multi-select cs-input">
                                      <mat-select placeholder="Location" [disabled]="!enable_location" name="location_id" [(ngModel)]="lead.location_id" #location_id="ngModel" required>
                                        <mat-option value=""> None</mat-option>
                                        <mat-option *ngFor="let val of locations" [value]="val.id"> {{val.location_name}} </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                     <mat-error color="primary" *ngIf="f.submitted && !location_id.valid" >This field is required</mat-error>
                                      <div class="edit-icon right-side" [ngClass]="{'active': enable_location}">
                                        <button mat-button class="save dark-green-bg" type="submit"><i class="material-icons" title="Save">save</i></button>
                                        <a mat-button class="edit" *ngIf="!enable_location" (click)="enable_location=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                      </div>
                                  </div> -->

                                <div class="control-field col-4 edit-input"  [ngClass]="{'active': enable_state}" *ngIf="lead.country != 99"  >
                                    <mat-form-field class="example-full-width cs-input">
                                        <input matInput placeholder="State" readonly={{!enable_state}} name="state" [(ngModel)]="lead.state" #state="ngModel"  required>                                         
                                        <div class="edit-icon">
                                            <button mat-button class="save" *ngIf="enable_state"><i class="material-icons green-text" title="Save">save</i></button>
                                            <a mat-button class="edit" *ngIf="!enable_state" (click)="enable_state = true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>
                                    <mat-error color="primary" *ngIf="f.submitted && !state.valid" >This field is required</mat-error>
                                </div>
                                
                                <div class="control-field col-4 edit-input" *ngIf="lead.country == 99" [ngClass]="{'active': enable_state}">
                                    <mat-form-field class="cs-multi-select cs-input" >
                                      <mat-select placeholder="State" [disabled]="!enable_state" name="state" [(ngModel)] = "lead.state" #state="ngModel"  (selectionChange)="getDistrictList()" required>
                                        <mat-option *ngFor = "let val of states" [value]="val.state_name"> {{val.state_name}} </mat-option>                                              
                                      </mat-select>

                                      <div class="edit-icon right-side" [ngClass]="{'active': enable_state}">
                                          <button mat-button class="save dark-green-bg  " *ngIf="enable_state" type="submit"><i class="material-icons" title="Save">save</i></button>
                                          <a mat-button class="edit" *ngIf="!enable_state" (click)="enable_state=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>
                                    <!-- <mat-error color="primary" *ngIf="f.submitted && !profile.valid" >This field is required</mat-error> -->
                                   
                                </div>

                                

                                <div class="control-field col-4 edit-input"  [ngClass]="{'active': enable_district}" *ngIf="lead.country != 99"  > 
                                    <mat-form-field class="example-full-width cs-input">
                                        <input matInput placeholder="District" readonly={{!enable_district}} name="district" [(ngModel)]="lead.district" #district="ngModel" required >                                        
                                        <div class="edit-icon">
                                            <button mat-button class="save" *ngIf="enable_district"><i class="material-icons green-text" title="Save">save</i></button>
                                            <a mat-button class="edit" *ngIf="!enable_district" (click)="enable_district = true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>                    
                                </div>

                                <div class="control-field col-4 edit-input" *ngIf="lead.country == 99" [ngClass]="{'active': enable_district}">
                                    <mat-form-field class="cs-multi-select cs-input" >
                                      <mat-select placeholder="District" [disabled]="!enable_district" name="district" [(ngModel)] = "lead.district"   (selectionChange)="getCityList()" #district="ngModel" required>
                                        <mat-option *ngFor="let val of districts" [value]="val.district_name"> {{val.district_name}} </mat-option>                                             
                                      </mat-select>
                                      <div class="edit-icon right-side" [ngClass]="{'active': enable_district}">
                                          <button mat-button class="save dark-green-bg  " *ngIf="enable_district" type="submit"><i class="material-icons" title="Save">save</i></button>
                                          <a mat-button class="edit" *ngIf="!enable_district" (click)="enable_district=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>
                                    <!-- <mat-error color="primary" *ngIf="f.submitted && !profile.valid" >This field is required</mat-error> -->
                                    
                                </div>

                                <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_city}" > 
                                    <mat-form-field class="example-full-width cs-input" >
                                        <input matInput placeholder="City" readonly={{!enable_city}} name="city" [(ngModel)]="lead.city" #city="ngModel" >                                        
                                        <div class="edit-icon">
                                            <button mat-button class="save" *ngIf="enable_city"><i class="material-icons green-text" title="Save">save</i></button>
                                            <a mat-button class="edit" *ngIf="!enable_city" (click)="enable_city = true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>                    
                                </div>
                                
                                <div class="control-field col-4 edit-input"  [ngClass]="{'active': enable_pin_code}"  *ngIf="lead.country != 99">
                                    <mat-form-field class="example-full-width cs-input">
                                        <input matInput placeholder="Pin-code"  (keypress)="numeric_Number($event)" readonly={{!enable_pin_code}} name="pin" [(ngModel)]="lead.pin" #pin="ngModel" maxlength="6">
                                        <div class="edit-icon">
                                            <button mat-button class="save" *ngIf="enable_pin_code"><i class="material-icons green-text" title="Save">save</i></button>
                                            <a mat-button class="edit" *ngIf="!enable_pin_code" (click)="enable_pin_code = true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>            
                                </div>

                                <div class="control-field col-4 edit-input" *ngIf="lead.country == 99" [ngClass]="{'active': enable_pin_code}">
                                    <mat-form-field class="cs-multi-select cs-input" >
                                      <mat-select placeholder="Pin-Code" [disabled]="!enable_pin_code" name="pin" [(ngModel)] = "lead.pin" #pin="ngModel" required>
                                        <mat-option *ngFor="let val of pincodes" [value]="val.pincode"> {{val.pincode}} </mat-option>                                           
                                      </mat-select>

                                      <div class="edit-icon right-side" [ngClass]="{'active': enable_pin_code}">
                                          <button mat-button class="save dark-green-bg  " *ngIf="enable_pin_code" type="submit"><i class="material-icons" title="Save">save</i></button>
                                          <a mat-button class="edit" *ngIf="!enable_pin_code" (click)="enable_pin_code=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                        </div>
                                    </mat-form-field>
                                    <!-- <mat-error color="primary" *ngIf="f.submitted && !profile.valid" >This field is required</mat-error> -->
                                 
                                </div>
                                </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_source}">
                              <mat-form-field class="cs-multi-select cs-input" >
                                <mat-select placeholder="Source" [disabled]="!enable_source" name="source" [(ngModel)] = "lead.source" #source="ngModel" required>
                                    <mat-option value="Email">Email</mat-option>
                                    <mat-option value="Facebook">Facebook</mat-option>
                                    <mat-option value="Inbound">Inbound</mat-option>
                                    <mat-option value="Missed Call">Missed Call</mat-option>
                                    <mat-option value="Other">Other</mat-option>
                                    <mat-option value="Outbound">Outbond</mat-option>
                                    <mat-option value="Walk In">Walk in</mat-option>
                                    <mat-option value="Instagram">Instagram</mat-option>
                                    <mat-option value="Facebook Form">Facebook Form</mat-option>
                                    <mat-option value="Website">Website</mat-option>
                                    <mat-option value="Website Chat">Website Chat</mat-option>
                                    <mat-option value="Other">Other</mat-option>
                                  
                                </mat-select>
                                <div class="edit-icon right-side" [ngClass]="{'active': enable_source}">
                                    <button mat-button class="save dark-green-bg  " *ngIf="enable_source" type="submit"><i class="material-icons" title="Save">save</i></button>
                                    <a mat-button class="edit" *ngIf="!enable_source" (click)="enable_source=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                  </div>
                              </mat-form-field>
                              <mat-error color="primary" *ngIf="f.submitted && !source.valid" >This field is required</mat-error>
                              
                            </div>
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_interested_in}">
                              <mat-form-field class="cs-multi-select cs-input">
                                <mat-select placeholder="Interested In"  [disabled]="!enable_interested_in" name="interested_in" [(ngModel)] = "lead.interested_in" #interested_in="ngModel" required>
                                  <mat-option value="Exterior Protection">Exterior Protection</mat-option>
                                  <mat-option value="Interior Protection">Interior Protection</mat-option>
                                  <mat-option value="Exterior Detailing">Exterior Detailing</mat-option>
                                  <mat-option value="Interior Detailing">Interior Detailing</mat-option>
                                  <mat-option value="SRS">SRS</mat-option>
                                </mat-select>
                                <div class="edit-icon right-side" [ngClass]="{'active': enable_interested_in}">
                                    <button mat-button class="save dark-green-bg" *ngIf="enable_interested_in" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                    <a mat-button class="edit" *ngIf="!enable_interested_in" (click)="enable_interested_in=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                  </div>
                              </mat-form-field>
                              <mat-error color="primary" *ngIf="f.submitted && !interested_in.valid" >This field is required</mat-error>
                            </div>


                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_franchise}">
                              <mat-form-field class="cs-multi-select cs-input">
                                <mat-select placeholder="Assign Franchise" [disabled]="!enable_franchise" name="franchise_id" [(ngModel)]="lead.franchise_id" #franchise_id="ngModel" >
                                  <mat-option value=""> None </mat-option>
                                  <mat-option *ngFor="let val of franchise_list" [value]="val.id">          {{val.location_name}} <small>({{val.name}})</small></mat-option>
                                </mat-select>
                                <div class="edit-icon right-side" [ngClass]="{'active': enable_franchise}">
                                    <button mat-button class="save dark-green-bg" type="submit"><i class="material-icons" title="Save">save</i></button>
                                    <a mat-button class="edit" *ngIf="!enable_franchise" (click)="enable_franchise=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                  </div>
                              </mat-form-field>
                               <mat-error color="primary" *ngIf="f.submitted && !franchise_id.valid" >This field is required</mat-error>
                            </div>
                          </div>

             



                          <div class="cs-heading mt20">
                            <h2>Company Detail</h2>
                          </div>
                          <div class="row">

                              <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_company_name}">
                                  <mat-form-field class="example-full-width cs-input">
                                    <input matInput placeholder="Company Name"  [readonly]="!enable_company_name" name = "company_name" [(ngModel)]="lead.company_name" #company_name="ngModel">
                                    <div class="edit-icon">
                                      <button mat-button class="save" *ngIf="enable_company_name" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                      <a mat-button class="edit" *ngIf="!enable_company_name" (click)="enable_company_name=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                    </div>
                                  </mat-form-field>
                                </div>


                                <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_company_contact_no}">
                                    <mat-form-field class="example-full-width cs-input">
                                      <input matInput placeholder="Company Contact No"  [readonly]="!enable_company_contact_no" name = "company_contact_no" [(ngModel)]="lead.company_contact_no" #company_contact_no="ngModel">
                                      <div class="edit-icon">
                                        <button mat-button class="save" *ngIf="enable_company_contact_no" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                        <a mat-button class="edit" *ngIf="!enable_company_contact_no" (click)="enable_company_contact_no=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                      </div>
                                    </mat-form-field>
                                  </div>


                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_gstin}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput placeholder="GSTIN" name = "gstin" [readonly]="!enable_gstin" [(ngModel)]="lead.gstin" #gstin="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_gstin" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_gstin" (click)="enable_gstin=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>

                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_company_address}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput  placeholder="Company Address" [readonly]="!enable_company_address" name = "company_address" [(ngModel)]="lead.company_address" #company_address="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_company_address" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_company_address" (click)="enable_company_address=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>
                           
                          </div>


                          <div class="cs-heading mt20">
                            <h2>Customer Detail</h2>
                          </div>
                          <div class="row">
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_first_name}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput placeholder="FIRST NAME * "  [readonly]="!enable_first_name" name = "first_name" [(ngModel)]="lead.first_name" #first_name="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_first_name" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_first_name" (click)="enable_first_name=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_last_name}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput placeholder="LAST NAME" name = "last_name" [readonly]="!enable_last_name" [(ngModel)]="lead.last_name" #last_name="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_last_name" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_last_name" (click)="enable_last_name=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_phone}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput (keypress)="numeric_Number($event)" placeholder="YOUR PHONE *" [readonly]="!enable_phone" name = "phone" [(ngModel)]="lead.phone" #phone="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_phone" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_phone" (click)="enable_phone=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>
                            <div class="control-field col-4 edit-input" [ngClass]="{'active': enable_email}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput placeholder="YOUR EMAIl" type="email" [readonly]="!enable_email" name = "email" [(ngModel)]="lead.email" pattern="[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*" #email="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_email" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_email" (click)="enable_email=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>
                            <div class="control-field col-8 edit-input" [ngClass]="{'active': enable_car_model}">
                              <mat-form-field class="example-full-width cs-input">
                                <input matInput placeholder="Vehicle MODEL *  " [readonly]="!enable_car_model" name  ="car_model" [(ngModel)]="lead.car_model" #car_model="ngModel">
                                <div class="edit-icon">
                                  <button mat-button class="save" *ngIf="enable_car_model" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                  <a mat-button class="edit" *ngIf="!enable_car_model" (click)="enable_car_model=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                </div>
                              </mat-form-field>
                            </div>

                            <div class="col-4">
                              <div class="control-field col-12 edit-input addrs-input" [ngClass]="{'active': enable_address}">
                                <mat-form-field class="example-full-width cs-input" >
                                  <textarea matInput placeholder="ADDRESS *" [readonly]="!enable_address" class="h125" name = "address" [(ngModel)]="lead.address" #address="ngModel"></textarea>
                                  <div class="edit-icon">
                                    <button mat-button class="save" *ngIf="enable_address" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                    <a mat-button class="edit" *ngIf="!enable_address" (click)="enable_address=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                  </div>
                                </mat-form-field>
                              </div>
                            </div>

                            <div class="col-8">
                              <div class="control-field col-12 edit-input addrs-input" [ngClass]="{'active': enable_message}">
                                <mat-form-field class="example-full-width cs-input">
                                  <textarea matInput placeholder="MESSAGE " [readonly]="!enable_message" class="h125" name = "message" [(ngModel)]="lead.message" #message="ngModel"></textarea>
                                  <div class="edit-icon">
                                    <button mat-button class="save" *ngIf="enable_message" type="submit"><i class="material-icons green-text" title="Save">save</i></button>
                                    <a mat-button class="edit" *ngIf="!enable_message" (click)="enable_message=true"><i class="material-icons blue-text" title="EDIT">create</i></a>
                                  </div>
                                </mat-form-field>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-4 pl20">
              <div class="col-12">
                <div class="right-data">
                  <div class="contst left-calls-info white-bg save-remark"  *ngIf="!db.datauser.franchise_id">
                    <div class="cs-heading" >
                      <h2>Assign Company Agent</h2>
                      <a class="edit" *ngIf="!enable_user_assign && !lead.followup_id" (click)="enable_user_assign=true"><i class="material-icons">create</i></a>
                      <a  *ngIf="lead.followup_id">Followup Pending</a>

                    </div>
                    <mat-divider class="mt10 mb10 left-right-15"></mat-divider>
                    
                    <div class="control-field edit-input" [ngClass]="{'active': enable_user_assign}">
                      <mat-form-field class="cs-multi-select cs-input wp100" >
                        <mat-select placeholder="Assign Sales Agent" [disabled]="!enable_user_assign" name="user_assign" [(ngModel)] = "agent_assign" #user_assign="ngModel" multiple required>
                          <mat-option *ngFor="let val of dduser_list" [value]="val.id">{{val.first_name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>

                    <div class="send-remark" [ngClass]="{'active': enable_user_assign}">
                        <textarea matInput placeholder="Remark" [disabled]="!enable_user_assign" class="h50" name="remark" [(ngModel)] = "lead.remark" #remark="ngModel"></textarea>
                        <i class="material-icons" matRipple  (click)="assignSalesAgent()">arrow_forward</i>
                    </div>
                  </div>
    
                  <div class="contst left-calls-info white-bg save-remark"  *ngIf="db.datauser.franchise_id">
                    <div class="cs-heading" >
                      <h2>Assign Sales Agent</h2>
                      <a class="edit" *ngIf="!enable_user_assign && !lead.followup_id" (click)="enable_user_assign=true"><i class="material-icons">create</i></a>
                      <a  *ngIf="lead.followup_id">Followup Pending</a>

                    </div>
                    <mat-divider class="mt10 mb10 left-right-15"></mat-divider>
                    
                    <div class="control-field edit-input" [ngClass]="{'active': enable_user_assign}">
                      <mat-form-field class="cs-multi-select cs-input wp100" >
                        <mat-select placeholder="Franchise Sales Manager" [disabled]="!enable_user_assign" name="franchise_sales_manager_assign" [(ngModel)] = "lead.franchise_sales_manager_assign" #franchise_sales_manager_assign="ngModel" >
                            <mat-option value="">None</mat-option>
                            <mat-option *ngFor="let val of user_list" [value]="val.id">{{val.first_name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    </div>
                    
                    <div class="send-remark" [ngClass]="{'active': enable_user_assign}">
                        <textarea matInput placeholder="Remark"  [disabled]="!enable_user_assign" class="h50" name="franchise_remark" [(ngModel)] = "lead.franchise_remark" #franchise_remark="ngModel"></textarea>
                        <i class="material-icons" matRipple  (click)="assignFranchiseSalesAgent()" *ngIf="enable_user_assign">arrow_forward</i>
                    </div>

                  </div>
                </div>
              </div>
              
              <div class="col-12">
                <div class="right-data mt15">
                  <div class="contst left-calls-info">
                    <div class="cs-heading" >
                      <div class="head-tabs">
                        <a (click)="mode = '1'; "  [ngClass]="{'active': mode == '1' }">Followup's</a>
                        <a (click)="mode = '2'; "  [ngClass]="{'active': mode == '2' }">Remarks</a>
                      </div>
                    </div>
                    
                    <ul *ngIf="mode == '1' ">
                        <li *ngFor="let val of follow_ups; let i = index">
                            <div class="head">
                                <p class="name"><strong>Created By : </strong>{{ val.created_name }}</p>
                                <p class="date">{{ val.created_at | date: 'dd MMM yyyy  h:mm a'  }}</p>
                            </div>

                            <div class="description" *ngIf="val.current_status">
                                <p >
                                    <strong >Status:&nbsp;</strong>
                                    <span style="margin: 0px 3px; font-weight: 600;">From</span>
                                    <span style="text-decoration: underline;"> {{val.previous_status?val.previous_status:'N/A'}}</span>
                                     <span  style="margin: 0px 3px; font-weight: 600;">To</span> 
                                     <span style="text-decoration: underline;">  {{val.current_status}} </span>
                                </p>
                            </div>


                            <div class="description">
                                <p *ngIf="val.next_follow_type!='' "><strong >Next Followup Type:&nbsp;</strong>{{ val.next_follow_type }}</p>
                            </div>

                          

                            <div class="description">
                                <p *ngIf="val.next_follow_date!='0000-00-00' "><strong >Next Followup Date:&nbsp;</strong>{{ val.next_follow_date | date: 'dd MMM yyyy'}}</p>
                            </div>

                            <div class="description">
                                <p><strong>Remark:</strong>&nbsp;{{ val.description }}</p>
                            </div>


                        </li>
                    </ul>
                    
                    
                    <ul *ngIf="mode == '2' && !db.datauser.franchise_id">
                        <li *ngFor="let val of remarks; let i = index">
                          <div class="head">
                            <!-- <p class="name">{{ lead.first_name +' '+ lead.last_name }}</p> -->
                           <div>
                              <p class="name"><strong>Assign by : </strong>{{ val.first_name  }}</p>
                            <!-- assign by -->
                           </div>
                            <p class="date">{{ val.date_created | date: 'dd MMM yyyy h:mm:ss a' }}</p>
                            
                          </div>
                          <div class="description">
                            <p><strong>Assign To :</strong>{{ val.assign_sales  }}</p>
                            </div>
                            <div class="description">
                                <p><strong>Remark :</strong> {{ val.remark }}</p>
                              
                              </div>
                        </li>
                      </ul>
    
    
                      <ul *ngIf="mode == '2' && db.datauser.franchise_id">
                          <li *ngFor="let val of consumers_remarks; let i = index">
                            <div class="head">
                              <!-- <p class="name">{{ lead.first_name +' '+ lead.last_name }}</p> -->
                              <p class="name"><strong>Assign by : </strong>{{ val.created_name  }}</p>
                              <!--  -->
                              <!-- <p class="name"><strong>Assign To :</strong>{{ val.assign_name  }}</p> -->
                              <p class="date">{{ val.date_created | date: 'dd MMM yyyy h:mm:ss a' }}</p>
                              
                            </div>
                            <div class="description">
                                <p><strong>Assign To :</strong>{{ val.assign_name  }}</p>
                                </div>

                            <div class="description">
                              <p>&nbsp; {{ val.remark }}</p>
                            </div>
                          </li>
                        </ul>
    
                  
                  </div>
                </div>
              </div>
            </div>
        </div>
      </form>
    </div>
</div>

<div class="h100"></div>
